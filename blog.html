<script>
let LANG = localStorage.getItem("blog_lang") || "hi";

function setLang(lang) {
  LANG = lang;
  localStorage.setItem("blog_lang", lang);
  renderBlogs();
}

function renderBlogs() {
  fetch('/blog/posts.json')
    .then(res => res.json())
    .then(data => {
      const posts = data.posts || [];
      const container = document.getElementById('blog-list');
      container.innerHTML = '';

      posts.forEach(post => {
        const title = LANG === 'hi' ? post.title_hi : post.title_en;
        const desc  = LANG === 'hi' ? post.description_hi : post.description_en;
        const slug  = LANG === 'hi' ? post.slug_hi : post.slug_en;

        container.innerHTML += `
          <div style="border:1px solid #ddd; padding:15px; margin-bottom:15px;">
            <h2>${title}</h2>
            <p>${desc}</p>
            <a href="/post.html?slug=${slug}">Read More</a>
          </div>
        `;
      });
    });
}

renderBlogs();
</script>
